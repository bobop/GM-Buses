- content_for :header do
  %script{:src => "http://maps.google.com/maps/api/js?key=AIzaSyBsgSnMudr-fgedsyDXudQnaG7m-CS8mts&sensor=false", :type => "text/javascript"}
  %script{:type => "text/javascript"}
    //<![CDATA[
    function initialize() {
    var latlng = new google.maps.LatLng(#{params[:lat]}, #{params[:long]})
    var myOptions = {zoom: 14,center: latlng,disableDefaultUI: true,zoomControl: true,mapTypeId: google.maps.MapTypeId.ROADMAP};
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var marker = new google.maps.Marker({position: latlng,map: map,title:"#{params[:stop_name]}"});
    }
    //]]>
.row
  .span6
    %h2 Times for Route #{params[:route_id]}
    .well
      = params[:service_description]
      %br/
      = params[:stop_name]
      %br/
      on #{Time.zone.now.strftime("%a %d %B %Y, %H:%M")}
    .row
      - @times['results']['bindings'].each_with_index do |t, i|
        .span2
          .center
            <span#{" class='faded'" if Time.zone.parse("#{t['depTime']['value']}", Time.zone.now) < Time.zone.now}>#{t['depTime']['value'][0..4]}
  .span3
    #map_canvas.stop
%p
  - @times.inspect
%p
  - @query
